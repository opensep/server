<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
            const licenseText = $('.license-text');
            const license = $.ajax({
                method: 'get',
                url: 'https://raw.githubusercontent.com/opensep/server/main/LICENSE',
                success: function(response) {
                    licenseText.html(response);
                }
            })

            licenseText.scroll(function (event) {
                if (event.target.scrollTop === 12928) {
                    $('.btn').removeClass('disabled');
                }
            })

            const databaseSetup = $('.database-setup');
            databaseSetup.submit(function (event) {

                event.preventDefault();

                $('.alert').hide();


                const hostname = $('#hostname').val();
                const username = $('#username').val();
                const password = $('#password').val();
                const database = $('#database').val();
                const port = $('#port').val();
                const certificate = $('#certificate').val();

                if(!hostname || !username || !password || !database) {
                    $('.alert').show();
                    return;
                }

                $.ajax({
                    url: '/installer',
                    method: 'post',
                    success: function (data) {
                        console.log(data);
                    }
                })
                
            })
            
        });
    </script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" />
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
          <button class="btn btn-dark" style="margin: 0 auto;">OpenSEP</btn>
        </div>
    </nav>
    <div class="container">
        <div class="step-1" style="display: none;">
            <h3 style="text-align: center; padding: 15px 0;">License agreement</h3>
            <div class="form-floating">
                <textarea class="license-text form-control" style="width: 600px; height: 650px; text-align: center; resize: none; display: block; margin: 0 auto;" readonly></textarea>
                <button class="btn btn-primary btn-agree disabled" style="display: block; margin: 25px auto;">Agreed and continue!</button>
            </div>
        </div>
        <div class="alert alert-danger" style="margin: 25px auto; width: 400px; display: none; text-align: center;" role="alert">
            Database information might not be incorrect!
          </div>
        <form class="row database-setup" novalidate>
            <div class="step-2" style="display: block; width: 350px; margin: 0 auto;">
                <h3 style="text-align: center; padding: 15px 0;">Database connection settings</h3>
                <div class="mb-3">
                    <label for="hostname" class="form-label">Hostname</label>
                    <input type="text" class="form-control" id="hostname" required>
                    <div class="invalid-feedback">
                        Please choose a username.
                      </div>
                </div>
                <div class="mb-3">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="username" required>
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">password</label>
                    <input type="password" class="form-control" id="password" required>
                </div>
                <div class="mb-3">
                    <label for="database" class="form-label">Database</label>
                    <input type="text" class="form-control" id="database" required>
                </div>
                <div class="mb-3">
                    <label for="port" class="form-label">Port</label>
                    <input type="text" class="form-control" id="port">
                </div>
                <div class="mb-3">
                    <label for="certificate" class="form-label">Certificate</label>
                    <textarea class="form-control" style="resize: none; height: 200px;" id="certificate"></textarea>
                </div>
                <div class="mb-3">
                    <button class="btn btn-primary btn-database">Continue</button>
                </div>
            </div>
        </form>
    </div>
</body>
</html>